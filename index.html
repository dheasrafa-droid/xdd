def generate_code(title, script, duration):
    # === Kode HTML ===
    html_code = f"""<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>{title}</title>
</head>
<body>
    <h1>{title}</h1>
    <video controls width="800">
        <source src="episode1.mp4" type="video/mp4">
        <track src="episode1_id.vtt" kind="subtitles" srclang="id" label="Indonesia">
    </video>
</body>
</html>
"""

    # === Kode Python untuk buat video ===
    python_code = f'''from moviepy.editor import *
from gtts import gTTS

script = """{script}"""
tts = gTTS(script, lang="id")
tts.save("narasi.mp3")

bg = ImageClip("bg.jpg").set_duration({duration})
narasi = AudioFileClip("narasi.mp3")

final_video = CompositeVideoClip([bg])
final_video = final_video.set_audio(narasi)
final_video.write_videofile("episode1.mp4", fps=24)
'''

    with open("index.html", "w", encoding="utf-8") as f:
        f.write(html_code)

    with open("generate.py", "w", encoding="utf-8") as f:
        f.write(python_code)

    print("âœ… Selesai! File index.html & generate.py sudah dibuat.")


# === Contoh pemakaian ===
generate_code(
    title="Episode 1: Necromancer vs Guardian",
    script="Di tanah gelap, bangkitlah Necromancer... (isi narasi lengkap 30 menit)",
    duration=1800  # 30 menit = 1800 detik
)
